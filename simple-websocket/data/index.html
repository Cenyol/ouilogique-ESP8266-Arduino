<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>⊛ MOOC LED ⊛</title>
		<link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
		<link href="style.css" rel="stylesheet" />
	</head>
	<body>
		<div class="container">
			<h1 class="neon">MOOC<br />Enseignes<br />et afficheurs<br />à LED<br /></h1>
			<p><a href="/"><img alt="logo EPFL" src="logo_epfl_b.png" /></a></p>
			<label>Texte à afficher</label>
			<textarea id="txtLED">#FF00FF</textarea>
			<button type="button" onclick="envoyerTexte()">Envoyer le&nbsp;texte à&nbsp;l’afficheur</button>
			<div id="label" class="alert">❧</div>
		</div>
		<script>
var connection = new WebSocket( 'ws://' + location.hostname + ':81/', [ 'arduino' ] );

connection.onopen = function()
{ connection.send( 'Connect ' + new Date() ); };

connection.onerror = function(error)
{ console.log( 'WebSocket Error ', error ); };

connection.onmessage = function(e)
{ console.log( 'Server: ', e.data ); };

function envoyerTexte()
{
	var txtLED = document.getElementById( "txtLED" ).value;
	console.log( txtLED );
	connection.send( txtLED );
}

function sleep( milliseconds )
{
	var start = new Date().getTime();
	for( var i = 0; i<1e7; i++ )
	{
		if( ( new Date().getTime() - start ) > milliseconds )
		{
			break;
		}
	}
}
		</script>
	</body>
</html>